---
title: "JavaScript/Node.js Examples"
description: "JavaScript and Node.js code examples for IoTeX AI Gateway"
---

# JavaScript/Node.js Examples

```javascript
// Install dependency: npm install openai
const OpenAI = require('openai');

const openai = new OpenAI({
    apiKey: 'your-api-key',
    baseURL: 'https://gateway.iotex.ai/v1'
});

// Simple conversation
async function simpleChat(prompt) {
    try {
        const completion = await openai.chat.completions.create({
            messages: [{ role: 'user', content: prompt }],
            model: 'gemini-2.5-flash',
            max_tokens: 1000
        });

        return completion.choices[0].message.content;
    } catch (error) {
        console.error('API call failed:', error);
        throw error;
    }
}

// Streaming output
async function streamChat(prompt) {
    const stream = await openai.chat.completions.create({
        model: 'gemini-2.5-flash',
        messages: [{ role: 'user', content: prompt }],
        stream: true,
    });

    for await (const chunk of stream) {
        process.stdout.write(chunk.choices[0]?.delta?.content || '');
    }
}

// Usage examples
(async () => {
    // Simple call
    const result = await simpleChat('Write a quicksort algorithm in JavaScript');
    console.log(result);

    // Streaming output
    console.log('\nStreaming example:');
    await streamChat('Explain React Hooks usage');
})();
```

## Browser Usage with Fetch API

```javascript
async function streamChat(prompt, onChunk) {
    const response = await fetch('https://gateway.iotex.ai/v1/chat/completions', {
        method: 'POST',
        headers: {
            'Authorization': 'Bearer your-api-key',
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            model: 'gemini-2.5-flash',
            messages: [{ role: 'user', content: prompt }],
            stream: true
        })
    });

    const reader = response.body.getReader();
    const decoder = new TextDecoder();

    while (true) {
        const { value, done } = await reader.read();
        if (done) break;

        const chunk = decoder.decode(value);
        const lines = chunk.split('\n');

        for (const line of lines) {
            if (line.startsWith('data: ') && line !== 'data: [DONE]') {
                try {
                    const data = JSON.parse(line.slice(6));
                    const content = data.choices[0]?.delta?.content;
                    if (content) {
                        onChunk(content);
                    }
                } catch (e) {
                    // Ignore parsing errors
                }
            }
        }
    }
}

// Usage example
streamChat('Explain what machine learning is', (content) => {
    document.getElementById('output').textContent += content;
});
```
